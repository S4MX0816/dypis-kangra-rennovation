"use strict";(self.webpackChunkdypis=self.webpackChunkdypis||[]).push([[99],{6099:(l,u,i)=>{i.r(u),i.d(u,{AdminModule:()=>a});var o=i(1571),s=i(8762),h=i(7599);const c=[{path:"",component:(()=>{class e{constructor(n){this.authService=n,this.authService.autoLogin()}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(s.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["admin"]],decls:2,vars:0,template:function(n,r){1&n&&(o.TgZ(0,"div"),o._UZ(1,"router-outlet"),o.qZA())},dependencies:[h.lC],styles:["div[_ngcontent-%COMP%]{padding:196px 60px 114px}"]}),e})(),children:[{path:"sign-in",loadChildren:()=>i.e(104).then(i.bind(i,9104)).then(e=>e.SignInModule)}]}];let a=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[h.Bz.forChild(c)]}),e})()},8762:(l,u,i)=>{i.d(u,{e:()=>c});var o=(()=>((o||(o={})).LOCAL_STORAGE_KEY="tokenData",o))(),s=i(1571),h=i(529),d=i(7599);let c=(()=>{class a{constructor(t,n){this.http=t,this.router=n,this._tokenExpirationDate=new Date,this._token=""}login(t){this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDhDqBDvnUYXHPMRQ2XKN77yMVdUzFDQ0E",{...t,returnSecureToken:!0}).subscribe({next:r=>this.handleAuthentication(r.idToken,+r.expiresIn),error:()=>alert("Invalid Credentials")})}autoLogout(t){this._tokenExpirationTimer=setTimeout(()=>this.logout(),t)}logout(){this.router.navigate([""]),localStorage.removeItem(o.LOCAL_STORAGE_KEY),this._tokenExpirationTimer&&clearTimeout(this._tokenExpirationTimer)}autoLogin(){const t=JSON.parse(localStorage.getItem(o.LOCAL_STORAGE_KEY)||"{}");if(t&&(this._tokenExpirationDate=new Date(t.expirationDate),this._token=t.token,this.token)){const n=new Date(t.expirationDate).getTime()-(new Date).getTime();this.autoLogout(n)}}handleAuthentication(t,n){const r=new Date((new Date).getTime()+1e3*n);this._tokenExpirationDate=r,this.autoLogout(1e3*n),localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify({token:t,expirationDate:r})),this.router.navigate([""])}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}}return a.\u0275fac=function(t){return new(t||a)(s.LFG(h.eN),s.LFG(d.F0))},a.\u0275prov=s.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);