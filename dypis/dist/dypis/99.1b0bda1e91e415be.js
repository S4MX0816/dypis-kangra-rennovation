"use strict";(self.webpackChunkdypis=self.webpackChunkdypis||[]).push([[99],{6099:(c,u,e)=>{e.r(u),e.d(u,{AdminModule:()=>a});var i=e(1571),s=e(8762),h=e(6217);const d=[{path:"",component:(()=>{class n{constructor(o){this.authService=o,this.authService.autoLogin()}}return n.\u0275fac=function(o){return new(o||n)(i.Y36(s.e))},n.\u0275cmp=i.Xpm({type:n,selectors:[["admin"]],decls:2,vars:0,template:function(o,r){1&o&&(i.TgZ(0,"div"),i._UZ(1,"router-outlet"),i.qZA())},dependencies:[h.lC],styles:["div[_ngcontent-%COMP%]{padding:196px 60px 114px}"]}),n})(),children:[{path:"",loadChildren:()=>e.e(104).then(e.bind(e,9104)).then(n=>n.SignInModule)},{path:"main",loadChildren:()=>e.e(79).then(e.bind(e,5079)).then(n=>n.MainModule)}]}];let a=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[h.Bz.forChild(d)]}),n})()},8762:(c,u,e)=>{e.d(u,{e:()=>d});var i=(()=>((i||(i={})).LOCAL_STORAGE_KEY="tokenData",i))(),s=e(1571),h=e(529),l=e(6217);let d=(()=>{class a{constructor(t,o){this.http=t,this.router=o,this._tokenExpirationDate=new Date,this._token=""}login(t){this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDhDqBDvnUYXHPMRQ2XKN77yMVdUzFDQ0E",{...t,returnSecureToken:!0}).subscribe({next:r=>this.handleAuthentication(r.idToken,+r.expiresIn),error:()=>alert("Invalid Credentials")})}autoLogout(t){this._tokenExpirationTimer=setTimeout(()=>this.logout(),t)}logout(){this.router.navigate([""]),localStorage.removeItem(i.LOCAL_STORAGE_KEY),this._tokenExpirationTimer&&clearTimeout(this._tokenExpirationTimer)}autoLogin(){const t=JSON.parse(localStorage.getItem(i.LOCAL_STORAGE_KEY)||"{}");if(t&&(this._tokenExpirationDate=new Date(t.expirationDate),this._token=t.token,this.token)){const o=new Date(t.expirationDate).getTime()-(new Date).getTime();this.autoLogout(o),this.router.navigate(["/admin/main"])}}handleAuthentication(t,o){const r=new Date((new Date).getTime()+1e3*o);this._tokenExpirationDate=r,this.autoLogout(1e3*o),localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify({token:t,expirationDate:r})),this.router.navigate(["/admin/main"])}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}}return a.\u0275fac=function(t){return new(t||a)(s.LFG(h.eN),s.LFG(l.F0))},a.\u0275prov=s.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);